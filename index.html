<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PKR - –î–µ–±–∞—Ç—ã</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Firebase SDK —Å async -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js" defer></script>
    <script>
      // –¢–≤–æ—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyA3MXvtEvpE6znCrF5MLaxWxcONYplZcbo",
        authDomain: "pkr-app-a7d6a.firebaseapp.com",
        databaseURL: "https://pkr-app-a7d6a-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "pkr-app-a7d6a",
        storageBucket: "pkr-app-a7d6a.firebasestorage.app",
        messagingSenderId: "968519585840",
        appId: "1:968519585840:web:f88b0bd37ce534dca05df5"
      };

      // –ñ–¥—ë–º –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
      document.addEventListener('DOMContentLoaded', () => {
        if (typeof firebase === 'undefined') {
          console.error("Firebase SDK not loaded yet");
          return;
        }
        try {
          firebase.initializeApp(firebaseConfig);
          console.log("Firebase initialized successfully");
          const db = firebase.database();
          db.ref('.info/connected').on('value', (snap) => {
            if (snap.val() === true) {
              console.log("Connected to Firebase Database");
              window.firebaseDb = db; // –°–æ—Ö—Ä–∞–Ω—è–µ–º db –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
            } else {
              console.log("Not connected to Firebase Database");
            }
          });
        } catch (error) {
          console.error("Firebase initialization error:", error);
        }
      });
    </script>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <section id="feed" class="content active">
                <div id="new-post">
                    <textarea id="post-text" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"></textarea>
                    <button id="submit-post">–¢–≤–∏—Ç–Ω—É—Ç—å</button>
                </div>
                <div id="posts"></div>
            </section>
            <section id="tournaments" class="content">
                <button id="create-tournament-btn">–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä</button>
                <div id="create-tournament-form" class="form-hidden">
                    <input id="tournament-name" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞">
                    <input id="tournament-date" type="text" placeholder="–î–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10.04.2025)">
                    <input id="tournament-logo" type="text" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø">
                    <textarea id="tournament-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞"></textarea>
                    <input id="tournament-address" type="text" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ 2GIS">
                    <input id="tournament-deadline" type="text" placeholder="–î–µ–¥–ª–∞–π–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, 05.04.2025)">
                    <button id="submit-tournament">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
                <div id="tournament-list"></div>
            </section>
            <section id="rating" class="content">
                <div id="rating-list"></div>
            </section>
            <section id="profile" class="content">
                <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
                <p>Username: <span id="username"></span></p>
                <input id="fullname" type="text" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è">
                <button id="save-profile">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </section>
            <section id="edu" class="content">
                <h2>PKR EDU</h2>
                <p>–û–±—É—á–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è!</p>
            </section>
        </div>
        <nav class="navbar">
            <button id="feed-btn" class="nav-btn active"><span>üè†</span> –õ–µ–Ω—Ç–∞</button>
            <button id="tournaments-btn" class="nav-btn"><span>üèÜ</span> –¢—É—Ä–Ω–∏—Ä—ã</button>
            <button id="rating-btn" class="nav-btn"><span>‚≠ê</span> –†–µ–π—Ç–∏–Ω–≥</button>
            <button id="profile-btn" class="nav-btn"><span>üë§</span> –ü—Ä–æ—Ñ–∏–ª—å</button>
            <button id="edu-btn" class="nav-btn"><span>üìö</span> EDU</button>
        </nav>
    </div>
    <script src="script.js"></script>
</body>
</html>
