const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TournamentDetailView-BrUyV6w6.js","assets/vendor-Dblg9kNh.js","assets/supabase-VbYwDtW3.js","assets/TournamentDetailView-quylPMud.css","assets/RatingView-BO-AVnG8.js","assets/RatingView-BLDru_3h.css","assets/ProfileView-6Xfdt0IZ.js","assets/ProfileView-ClT9rk1G.css","assets/EduView-BpGvRrYC.js"])))=>i.map(i=>d[i]);
import{d as e,r as a,c as t,o as n,F as l,a as s,b as o,w as r,e as i,f as u,t as c,u as d,R as m,g as v,v as p,h as g,i as f,j as _,k as y,l as b,m as h,n as w,p as k,q as I,s as D,x as T,y as U,z as L,A as q,B as C}from"./vendor-Dblg9kNh.js";import{c as P,_ as x}from"./supabase-VbYwDtW3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const M=P("https://dwkbptqrblyiqymnqjiv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR3a2JwdHFyYmx5aXF5bW5xaml2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM0MzA3NTcsImV4cCI6MjA1OTAwNjc1N30.QIHms9_kllO7SMxxUlu2U_ugICz1q_cr2-fO61092N4"),V=e("user",()=>{const e=a(!0),t=a(!1),n=a(null);return{isLoading:e,showRegistrationModal:t,userData:n,checkUserProfile:async function(){var a,l,s;e.value=!0;const o=null==(a=window.Telegram)?void 0:a.WebApp;if(!(null==(s=null==(l=null==o?void 0:o.initDataUnsafe)?void 0:l.user)?void 0:s.username))return console.warn("–í–ù–ò–ú–ê–ù–ò–ï: –î–∞–Ω–Ω—ã–µ Telegram –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í–∫–ª—é—á–∞—é —Ä–µ–∂–∏–º –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏."),n.value={id:"1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d",fullname:"–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",telegram_username:"dev_user"},void(e.value=!1);const{data:r}=await M.from("profiles").select("*").eq("telegram_username",o.initDataUnsafe.user.username).single();r?(n.value=r,t.value=!1):t.value=!0,e.value=!1},registerNewUser:async function(e){var a;const l=null==(a=window.Telegram)?void 0:a.WebApp;if(!e.trim())return alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è.");const{data:s,error:o}=await M.from("profiles").insert({fullname:e.trim(),telegram_username:l.initDataUnsafe.user.username,chat_id:l.initDataUnsafe.user.id.toString()}).select().single();o?alert("–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: "+o.message):(n.value=s,t.value=!1)}}}),R=(e,a)=>{const t=e.__vccOpts||e;for(const[n,l]of a)t[n]=l;return t},$={class:"navbar"},E=R({__name:"TheNavbar",setup(e){const v=a([{id:"feed",path:"/",icon:"üè†",name:"–õ–µ–Ω—Ç–∞"},{id:"tournaments",path:"/tournaments",icon:"üèÜ",name:"–¢—É—Ä–Ω–∏—Ä—ã"},{id:"rating",path:"/rating",icon:"‚≠ê",name:"–†–µ–π—Ç–∏–Ω–≥"},{id:"profile",path:"/profile",icon:"üë§",name:"–ü—Ä–æ—Ñ–∏–ª—å"},{id:"edu",path:"/edu",icon:"üìö",name:"EDU"}]);return(e,a)=>(n(),t("nav",$,[(n(!0),t(l,null,s(v.value,e=>(n(),o(d(m),{key:e.id,to:e.path,class:"nav-btn"},{default:r(()=>[i("span",null,c(e.icon),1),u(" "+c(e.name),1)]),_:2},1032,["to"]))),128))]))}},[["__scopeId","data-v-73e08696"]]),O={class:"modal-overlay"},F={class:"modal-content"},N=R({__name:"RegistrationModal",setup(e){const l=V(),s=a(""),o=()=>{l.registerNewUser(s.value)};return(e,a)=>(n(),t("div",O,[i("div",F,[a[1]||(a[1]=i("h2",null,"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",-1)),a[2]||(a[2]=i("p",null,"–ü–æ—Ö–æ–∂–µ, —Ç—ã —É –Ω–∞—Å –≤–ø–µ—Ä–≤—ã–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Å—è:",-1)),v(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),type:"text",placeholder:"–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è",onKeyup:g(o,["enter"])},null,544),[[p,s.value]]),i("button",{onClick:o},"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è")])]))}},[["__scopeId","data-v-c89fba91"]]),S={key:0,class:"loading-screen"},j={key:2,class:"app-container"},A={class:"main-content"},H={__name:"app",setup(e){const a=V();return f(()=>{var e;const t=null==(e=window.Telegram)?void 0:e.WebApp;t&&(t.ready(),t.expand()),a.checkUserProfile()}),(e,l)=>d(a).isLoading?(n(),t("div",S,[...l[0]||(l[0]=[i("h2",null,"PKR Debates",-1),i("p",null,"–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...",-1)])])):d(a).showRegistrationModal?(n(),o(N,{key:1})):(n(),t("div",j,[i("main",A,[_(d(y))]),_(E)]))}},J=e("posts",()=>{const e=a([]),t=a(!0),n=a(!1),l=a(!0),s=async()=>{t.value=!0,l.value=!0;const{data:a,error:n}=await M.from("posts").select("*, reactions(*)").order("id",{ascending:!1}).limit(20);n?console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:",n):(e.value=a,a.length<20&&(l.value=!1)),t.value=!1};return{posts:e,isFeedLoading:t,loadPosts:s,submitPost:async(e,a)=>{const t=V();if(!e.trim()&&!a||!t.userData)return!1;let n=null;if(a&&(n=await(async e=>{var a;if(!e)return null;const t=null==(a=V().userData)?void 0:a.telegram_username;if(!t)return null;const n=e.name.split(".").pop(),l=`${t}_${Date.now()}.${n}`,{error:s}=await M.storage.from("post-images").upload(l,e);if(s)return console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:",s),null;const{data:o}=M.storage.from("post-images").getPublicUrl(l);return o.publicUrl})(a),!n))return alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ü–æ—Å—Ç –Ω–µ –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω."),!1;const l=`${t.userData.fullname} (@${t.userData.telegram_username}):\n${e.trim()}`,{error:o}=await M.from("posts").insert({text:l,user_id:t.userData.telegram_username,image_url:n});return o?(alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: "+o.message),!1):(await s(),!0)},toggleReaction:async(a,t)=>{var n;const l=null==(n=V().userData)?void 0:n.telegram_username;if(!l)return console.error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –¥–ª—è —Ä–µ–∞–∫—Ü–∏–∏");const o=e.value.findIndex(e=>e.id===a);if(-1===o)return;const r=e.value[o],i=r.reactions.find(e=>e.user_id===l);i?i.type===t?r.reactions=r.reactions.filter(e=>e.user_id!==l):i.type=t:r.reactions.push({id:Date.now(),post_id:a,user_id:l,type:t});try{i?i.type!==t?await M.from("reactions").update({type:t}).eq("user_id",l).eq("post_id",a):await M.from("reactions").delete().eq("user_id",l).eq("post_id",a):await M.from("reactions").insert({post_id:a,user_id:l,type:t});const{data:n}=await M.from("posts").select("*, reactions(*)").eq("id",a).single();n&&(e.value[o]=n)}catch(u){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–µ–∞–∫—Ü–∏–∏ –≤ Supabase:",u),s()}},addComment:async(e,a)=>{const t=V().userData;if(!t)return!1;const n=`${t.fullname} (@${t.telegram_username}):\n${a.trim()}`,{error:l}=await M.from("comments").insert({post_id:e,user_id:t.telegram_username,text:n});return!l||(alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "+l.message),!1)},isLoadingMore:n,hasMorePosts:l,loadMorePosts:async()=>{var a;if(n.value||!l.value)return;n.value=!0;const t=null==(a=e.value[e.value.length-1])?void 0:a.id;if(!t)return void(n.value=!1);const{data:s,error:o}=await M.from("posts").select("*, reactions(*)").order("id",{ascending:!1}).lt("id",t).limit(20);o?console.error("–û—à–∏–±–∫–∞ –ø–æ–¥–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:",o):s&&s.length>0?(e.value.push(...s),s.length<20&&(l.value=!1)):l.value=!1,n.value=!1}}}),z={class:"comment-section"},B={key:0,class:"loading-comments"},W={key:1,class:"comment-list"},X={key:0},K={class:"comment-header"},Y=["innerHTML"],Z=["disabled"],Q=R({__name:"CommentSection",props:{postId:{type:Number,required:!0}},setup(e){const o=e,r=J(),u=a([]),d=a(!0),m=a(""),g=a(!1),_=async()=>{d.value=!0;const{data:e,error:a}=await M.from("comments").select("*").eq("post_id",o.postId).order("timestamp",{ascending:!0});a?console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:",a):u.value=e,d.value=!1},y=async()=>{if(!m.value.trim())return;g.value=!0;await r.addComment(o.postId,m.value)&&(m.value="",await _()),g.value=!1},w=e=>{var a;return(null==(a=e.text.match(/^(.*?)\s\(@(.*?)\):/))?void 0:a[1])||"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"},k=e=>{var a;return(null==(a=e.text.match(/^(.*?)\s\(@(.*?)\):/))?void 0:a[2])||"unknown"},I=e=>e.text.replace(/^(.*?)\s\(@(.*?)\):\s?/,"").replace(/\n/g,"<br>");return f(_),(e,a)=>(n(),t("div",z,[d.value?(n(),t("div",B,"–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤...")):(n(),t("div",W,[0===u.value.length?(n(),t("div",X,[...a[1]||(a[1]=[i("p",null,"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.",-1)])])):b("",!0),(n(!0),t(l,null,s(u.value,e=>(n(),t("div",{key:e.id,class:"comment"},[i("div",K,[i("strong",null,c(w(e)),1),i("span",null,"@"+c(k(e)),1)]),i("div",{class:"comment-content",innerHTML:I(e)},null,8,Y)]))),128))])),i("form",{onSubmit:h(y,["prevent"]),class:"comment-form"},[v(i("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),placeholder:"–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."},null,512),[[p,m.value]]),i("button",{type:"submit",disabled:g.value},"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",8,Z)],32)]))}},[["__scopeId","data-v-cec6a696"]]),G={class:"new-post-form"},ee={class:"form-actions"},ae={key:0,class:"image-preview"},te=["src"],ne=["disabled"],le={key:0,class:"loading-screen"},se={key:1},oe={class:"post-header"},re={class:"post-user"},ie={class:"post-time"},ue=["innerHTML"],ce=["src"],de={class:"post-actions"},me=["onClick"],ve=["onClick"],pe=["onClick"],ge={key:0},fe={key:2,class:"loading-more"},_e={key:3,class:"loading-more"},ye=R({__name:"FeedView",setup(e){const r=J(),u=V(),m=a(""),g=a(!1),_=a(null),y=a(null),h=a(null),I=e=>{const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.target;t-a-n<300&&r.loadMorePosts()};f(()=>{r.loadPosts();const e=document.querySelector(".main-content");e&&e.addEventListener("scroll",I)}),w(()=>{const e=document.querySelector(".main-content");e&&e.removeEventListener("scroll",I)});const D=e=>{const a=e.target.files[0];a&&(y.value=a,h.value=URL.createObjectURL(a))},T=()=>{y.value=null,h.value=null,document.getElementById("file-upload").value=""},U=async()=>{g.value=!0;await r.submitPost(m.value,y.value)&&(m.value="",T()),g.value=!1},L=e=>{var a;return(null==(a=e.text.match(/^(.*?)\s\(@(.*?)\):/))?void 0:a[1])||"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"},q=e=>e.text.replace(/^(.*?)\s\(@(.*?)\):\s?/,"").replace(/\n/g,"<br>"),C=e=>{const a=Math.floor((new Date-new Date(e))/1e3);if(a<60)return`${a} —Å–µ–∫.`;const t=Math.floor(a/60);if(t<60)return`${t} –º–∏–Ω.`;const n=Math.floor(t/60);return n<24?`${n} —á.`:`${Math.floor(n/24)} –¥.`},P=(e,a)=>e.reactions.filter(e=>e.type===a).length,x=(e,a)=>{var t;const n=null==(t=u.userData)?void 0:t.telegram_username;return e.reactions.some(e=>e.user_id===n&&e.type===a)};return(e,a)=>(n(),t("div",null,[i("div",G,[v(i("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),placeholder:"–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"},null,512),[[p,m.value]]),i("div",ee,[a[1]||(a[1]=i("label",{for:"file-upload",class:"file-upload-label"}," üì∑ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ ",-1)),i("input",{id:"file-upload",type:"file",onChange:D,accept:"image/*",style:{display:"none"}},null,32)]),h.value?(n(),t("div",ae,[i("img",{src:h.value,alt:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"},null,8,te),i("button",{onClick:T,class:"remove-image-btn"},"√ó")])):b("",!0),i("button",{onClick:U,disabled:g.value},c(g.value?"–ü—É–±–ª–∏–∫–∞—Ü–∏—è...":"–¢–≤–∏—Ç–Ω—É—Ç—å"),9,ne)]),d(r).isFeedLoading?(n(),t("div",le,[...a[2]||(a[2]=[i("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...",-1)])])):(n(),t("div",se,[(n(!0),t(l,null,s(d(r).posts,e=>(n(),t("div",{key:e.id,class:"post"},[i("div",oe,[i("div",re,[i("strong",null,c(L(e)),1),i("span",null,"@"+c(e.user_id),1)]),i("div",ie,c(C(e.timestamp)),1)]),i("div",{class:"post-content",innerHTML:q(e)},null,8,ue),e.image_url?(n(),t("img",{key:0,src:e.image_url,class:"post-image"},null,8,ce)):b("",!0),i("div",de,[i("button",{onClick:a=>d(r).toggleReaction(e.id,"like"),class:k(["reaction-btn",{active:x(e,"like")}])}," üëç "+c(P(e,"like")),11,me),i("button",{onClick:a=>d(r).toggleReaction(e.id,"dislike"),class:k(["reaction-btn",{active:x(e,"dislike")}])}," üëé "+c(P(e,"dislike")),11,ve),i("button",{onClick:a=>{return t=e.id,void(_.value===t?_.value=null:_.value=t);var t},class:"reaction-btn"}," üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ",8,pe)]),_.value===e.id?(n(),o(Q,{key:1,"post-id":e.id},null,8,["post-id"])):b("",!0)]))),128)),0===d(r).posts.length?(n(),t("p",ge,"–í –ª–µ–Ω—Ç–µ –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π. –°—Ç–∞–Ω—å –ø–µ—Ä–≤—ã–º!")):b("",!0)])),d(r).isLoadingMore?(n(),t("div",fe,[...a[3]||(a[3]=[i("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø–æ—Å—Ç–æ–≤...",-1)])])):b("",!0),d(r).hasMorePosts||d(r).isFeedLoading?b("",!0):(n(),t("div",_e,[...a[4]||(a[4]=[i("p",null,"–í—ã –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏.",-1)])]))]))}},[["__scopeId","data-v-f81340bf"]]);function be(e){if(!e||!/^\d{2}\.\d{2}\.\d{4}$/.test(e))return null;const[a,t,n]=e.split(".");return`${n}-${t}-${a}`}const he=e("tournaments",()=>{const e=a([]),t=a(!0),n=a(null),l=a([]),s=a([]),o=async()=>{if(e.value.length>0&&!t.value)return;t.value=!0;const{data:a,error:n}=await M.from("tournaments").select("*").order("date",{ascending:!1});n?(console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤:",n),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä—ã")):e.value=a,t.value=!1},r=async e=>{const{data:a,error:t}=await M.from("tournament_posts").select("*").eq("tournament_id",e).order("timestamp",{ascending:!1});t?console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤ —Ç—É—Ä–Ω–∏—Ä–∞:",t):l.value=a},i=async e=>{const{data:a,error:t}=await M.from("registrations").select("*").eq("tournament_id",e).order("timestamp",{ascending:!0});t?(console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π:",t),s.value=[]):s.value=a||[]};return{allTournaments:e,isLoading:t,currentTournament:n,tournamentPosts:l,registrations:s,loadTournaments:o,loadTournamentById:async e=>{t.value=!0,n.value=null;const{data:a,error:l}=await M.from("tournaments").select("*").eq("id",e).single();l?(console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞:",l),n.value=null):n.value=a,t.value=!1},createTournament:async a=>{var t;const n=V();let l=null;if(a.logoFile){const e=a.logoFile,t=e.name.split(".").pop(),n=`logo-${Date.now()}.${t}`,{error:s}=await M.storage.from("tournament-logos").upload(n,e);if(s)return console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ—Ç–∏–ø–∞:",s),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø."),!1;const{data:o}=M.storage.from("tournament-logos").getPublicUrl(n);l=o.publicUrl}const{error:s}=await M.from("tournaments").insert({name:a.name,date:be(a.date),city:a.city,scale:a.scale,desc:a.desc,logo:l,creator_id:null==(t=n.userData)?void 0:t.telegram_username});return s?(console.error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞:",s),alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä: "+s.message),!1):(e.value=[],await o(),!0)},loadTournamentPosts:r,createTournamentPost:async(e,a)=>{if(!a.trim())return!1;const{error:t}=await M.from("tournament_posts").insert({tournament_id:e,text:a.trim()});return t?(alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç: "+t.message),!1):(await r(e),!0)},loadRegistrations:i,submitRegistration:async e=>{if(!(e.faction_name&&e.speaker1_username&&e.speaker2_username&&e.club))return alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è."),!1;const{error:a}=await M.from("registrations").insert({tournament_id:e.tournament_id,faction_name:e.faction_name,speaker1_username:e.speaker1_username,speaker2_username:e.speaker2_username,club:e.club,city:e.city,status:"pending"});return a?(console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:",a),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é: "+a.message),!1):(await i(e.tournament_id),!0)},updateRegistrationStatus:async(e,a)=>{const{data:t,error:n}=await M.from("registrations").update({status:a}).eq("id",e).select().single();if(n)console.error("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞:",n),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–º–∞–Ω–¥—ã.");else{const a=s.value.findIndex(a=>a.id===e);-1!==a&&(s.value[a]=t)}},publishTab:async(e,a)=>{const{error:t}=await M.from("tournaments").update({tab_published:a}).eq("id",e);t?alert("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¢–≠–ë–∞."):(n.value&&(n.value.tab_published=a),alert(`–¢–≠–ë —É—Å–ø–µ—à–Ω–æ ${a?"–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω":"—Å–∫—Ä—ã—Ç"}.`))}}}),we={key:0,class:"file-name"},ke=["disabled"],Ie=R({__name:"CreateTournamentForm",emits:["close"],setup(e,{emit:l}){const s=he(),o=l,r=a(""),u=a(""),d=a(""),m=a(""),g=a(""),f=a(null),_=a(!1),y=e=>{f.value=e.target.files[0]},w=async()=>{_.value=!0;const e={name:r.value,date:u.value,city:d.value,scale:m.value,desc:g.value,logoFile:f.value};await s.createTournament(e)&&o("close"),_.value=!1};return(e,a)=>(n(),t("form",{class:"create-form",onSubmit:h(w,["prevent"])},[a[7]||(a[7]=i("h3",null,"–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç—É—Ä–Ω–∏—Ä–∞",-1)),v(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞",required:""},null,512),[[p,r.value]]),v(i("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),type:"text",placeholder:"–î–∞—Ç–∞ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì)",required:""},null,512),[[p,u.value]]),v(i("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>d.value=e),required:""},[...a[5]||(a[5]=[i("option",{value:"",disabled:""},"–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥",-1),i("option",{value:"–ê–ª–º–∞—Ç—ã"},"–ê–ª–º–∞—Ç—ã",-1),i("option",{value:"–ê—Å—Ç–∞–Ω–∞"},"–ê—Å—Ç–∞–Ω–∞",-1),i("option",{value:"–î—Ä—É–≥–æ–π"},"–î—Ä—É–≥–æ–π",-1)])],512),[[I,d.value]]),v(i("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>m.value=e),required:""},[...a[6]||(a[6]=[i("option",{value:"",disabled:""},"–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—à—Ç–∞–±",-1),i("option",{value:"–ì–æ—Ä–æ–¥—Å–∫–æ–π"},"–ì–æ—Ä–æ–¥—Å–∫–æ–π",-1),i("option",{value:"–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π"},"–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π",-1)])],512),[[I,m.value]]),v(i("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>g.value=e),placeholder:"–û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞"},null,512),[[p,g.value]]),a[8]||(a[8]=i("label",{for:"logo-upload",class:"file-upload-label"},"üñºÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø",-1)),i("input",{id:"logo-upload",type:"file",onChange:y,accept:"image/*",style:{display:"none"}},null,32),f.value?(n(),t("span",we,c(f.value.name),1)):b("",!0),i("button",{type:"submit",disabled:_.value},c(_.value?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä"),9,ke)],32))}},[["__scopeId","data-v-e00c83f4"]]),De={class:"page-header"},Te={class:"controls-container"},Ue={class:"tabs"},Le={class:"filters"},qe={key:1,class:"loading-screen"},Ce={key:2,class:"tournament-list"},Pe={class:"tournament-card"},xe=["src"],Me={class:"tournament-info"},Ve={key:0},Re=R({__name:"TournamentsView",setup(e){const u=he(),m=a(!1),p=a(!1),g=a("all"),_=a("all"),y=D(()=>{const e=new Date;return e.setHours(0,0,0,0),u.allTournaments.filter(a=>{if(!a.date)return!1;const t=new Date(a.date);return p.value?t<e:t>=e}).filter(e=>"all"===g.value||e.city===g.value).filter(e=>"all"===_.value||e.scale===_.value).sort((e,a)=>{const t=new Date(e.date),n=new Date(a.date);return p.value?n-t:t-n})});return f(()=>{u.loadTournaments()}),(e,a)=>{const f=T("router-link");return n(),t("div",null,[i("div",De,[a[6]||(a[6]=i("h2",null,"–¢—É—Ä–Ω–∏—Ä—ã",-1)),i("button",{class:"create-btn",onClick:a[0]||(a[0]=e=>m.value=!m.value)},c(m.value?"–û—Ç–º–µ–Ω–∞":"–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä"),1)]),m.value?(n(),o(Ie,{key:0,onClose:a[1]||(a[1]=e=>m.value=!1)})):b("",!0),i("div",Te,[i("div",Ue,[i("button",{onClick:a[2]||(a[2]=e=>p.value=!1),class:k({active:!p.value})},"–ê–∫—Ç–∏–≤–Ω—ã–µ",2),i("button",{onClick:a[3]||(a[3]=e=>p.value=!0),class:k({active:p.value})},"–ê—Ä—Ö–∏–≤",2)]),i("div",Le,[v(i("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>g.value=e)},[...a[7]||(a[7]=[i("option",{value:"all"},"–í—Å–µ –≥–æ—Ä–æ–¥–∞",-1),i("option",{value:"–ê–ª–º–∞—Ç—ã"},"–ê–ª–º–∞—Ç—ã",-1),i("option",{value:"–ê—Å—Ç–∞–Ω–∞"},"–ê—Å—Ç–∞–Ω–∞",-1),i("option",{value:"–î—Ä—É–≥–æ–π"},"–î—Ä—É–≥–æ–π",-1)])],512),[[I,g.value]]),v(i("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>_.value=e)},[...a[8]||(a[8]=[i("option",{value:"all"},"–í—Å–µ –º–∞—Å—à—Ç–∞–±—ã",-1),i("option",{value:"–ì–æ—Ä–æ–¥—Å–∫–æ–π"},"–ì–æ—Ä–æ–¥—Å–∫–æ–π",-1),i("option",{value:"–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π"},"–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π",-1)])],512),[[I,_.value]])])]),d(u).isLoading?(n(),t("div",qe,[...a[9]||(a[9]=[i("p",null,"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç—É—Ä–Ω–∏—Ä–æ–≤...",-1)])])):(n(),t("div",Ce,[(n(!0),t(l,null,s(y.value,e=>(n(),o(f,{key:e.id,to:`/tournaments/${e.id}`,class:"tournament-card-link"},{default:r(()=>[i("div",Pe,[i("img",{src:e.logo||"https://via.placeholder.com/64",class:"tournament-logo",alt:"–õ–æ–≥–æ—Ç–∏–ø"},null,8,xe),i("div",Me,[i("strong",null,c(e.name),1),i("span",null,c(e.scale)+" | "+c(e.city),1),i("span",null,"–î–∞—Ç–∞: "+c(new Date(e.date).toLocaleDateString("ru-RU")),1)])])]),_:2},1032,["to"]))),128)),0!==y.value.length||d(u).isLoading?b("",!0):(n(),t("p",Ve,"–¢—É—Ä–Ω–∏—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã."))]))])}}},[["__scopeId","data-v-3395c89a"]]),$e=U({history:L("/pkr-debate-app/"),routes:[{path:"/",name:"feed",component:ye},{path:"/tournaments",name:"tournaments",component:Re},{path:"/tournaments/:id",name:"tournament-detail",component:()=>x(()=>import("./TournamentDetailView-BrUyV6w6.js"),__vite__mapDeps([0,1,2,3]))},{path:"/rating",name:"rating",component:()=>x(()=>import("./RatingView-BO-AVnG8.js"),__vite__mapDeps([4,1,2,5]))},{path:"/profile",name:"profile",component:()=>x(()=>import("./ProfileView-6Xfdt0IZ.js"),__vite__mapDeps([6,1,2,7]))},{path:"/edu",name:"edu",component:()=>x(()=>import("./EduView-BpGvRrYC.js"),__vite__mapDeps([8,1,2]))}]}),Ee=q(H);Ee.use(C()),Ee.use($e),Ee.mount("#app");export{R as _,V as a,M as s,he as u};
