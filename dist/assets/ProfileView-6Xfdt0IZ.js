import{r as a,s as e,i as t,c as s,o as l,e as i,p as n,t as r,l as c,g as u,v as o,F as d,a as v,f as m,H as f}from"./vendor-Dblg9kNh.js";import{_ as p,a as g,s as h}from"./index-CXEiTLZ-.js";import"./supabase-VbYwDtW3.js";const y={class:"profile-container"},b={class:"profile-header"},k={key:0,class:"status-icon"},_={key:1,class:"status-icon"},w={class:"status-text"},D={class:"profile-content"},T={class:"profile-card"},U={class:"card-header"},x={class:"user-info"},C={class:"info-item"},N={class:"username"},P={class:"info-item"},I={class:"chat-id"},V={class:"info-item"},j={key:0,class:"fullname-display"},q={key:1,class:"fullname-edit"},R={key:0,class:"profile-card telegram-card"},W={class:"profile-card stats-card"},F={class:"stats-grid"},S={class:"stat-item"},A={class:"stat-number"},H={class:"stat-item"},$={class:"stat-number"},z={class:"stat-item"},B={class:"stat-number"},E={class:"stat-item"},G={class:"stat-number"},J={class:"profile-card activity-card"},K={class:"activity-list"},L={key:0,class:"no-activity"},M={key:1},O={class:"activity-icon"},Q={class:"activity-content"},X={class:"activity-title"},Y={class:"activity-date"},Z={class:"profile-card settings-card"},aa={class:"settings-list"},ea={class:"setting-item"},ta={class:"setting-label"},sa={class:"setting-item"},la={class:"setting-label"},ia=p({__name:"ProfileView",setup(p){const ia=g(),na=a(!1),ra=a(""),ca=a({notifications:!0,resultsNotifications:!0}),ua=a({tournamentsParticipated:12,tournamentsWon:3,totalPoints:1250,currentRank:15}),oa=a([{id:1,icon:"üèÜ",title:'–£—á–∞—Å—Ç–∏–µ –≤ —Ç—É—Ä–Ω–∏—Ä–µ "–í–µ—Å–µ–Ω–Ω–∏–π –∫—É–±–æ–∫"',date:new Date("2024-03-15")},{id:2,icon:"üìä",title:"–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã",date:new Date("2024-03-10")},{id:3,icon:"üéØ",title:'–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ç—É—Ä–Ω–∏—Ä "–õ–µ—Ç–Ω–∏–π —á–µ–º–ø–∏–æ–Ω–∞—Ç"',date:new Date("2024-03-05")}]),da=e(()=>ia.userData),va=e(()=>{var a;return(null==(a=da.value)?void 0:a.chat_id)&&null!==da.value.chat_id}),ma=()=>{var a;na.value=!0,ra.value=(null==(a=da.value)?void 0:a.fullname)||""},fa=()=>{na.value=!1,ra.value=""},pa=async()=>{if(ra.value.trim())try{const{error:a}=await h.from("profiles").update({fullname:ra.value.trim()}).eq("telegram_username",da.value.telegram_username);if(a)throw a;ia.userData.fullname=ra.value.trim(),na.value=!1,alert("–ò–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ!")}catch(a){alert("–û—à–∏–±–∫–∞: "+a.message)}else alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è!")},ga=async()=>{var a,e,t;const s=null==(a=window.Telegram)?void 0:a.WebApp;if(null==(t=null==(e=null==s?void 0:s.initDataUnsafe)?void 0:e.user)?void 0:t.id)try{const{error:a}=await h.from("profiles").update({chat_id:s.initDataUnsafe.user.id.toString()}).eq("telegram_username",da.value.telegram_username);if(a)throw a;ia.userData.chat_id=s.initDataUnsafe.user.id.toString(),alert("Telegram —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω!")}catch(l){alert("–û—à–∏–±–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ Telegram: "+l.message)}else alert("–û—à–∏–±–∫–∞: –¥–∞–Ω–Ω—ã–µ Telegram –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")},ha=async()=>{try{const{error:a}=await h.from("profiles").update({settings:{notifications:ca.value.notifications,resultsNotifications:ca.value.resultsNotifications}}).eq("telegram_username",da.value.telegram_username);if(a)throw a}catch(a){console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:",a)}};return t(()=>{(async()=>{})(),(async()=>{var a;try{(null==(a=da.value)?void 0:a.settings)&&(ca.value={notifications:da.value.settings.notifications??!0,resultsNotifications:da.value.settings.resultsNotifications??!0})}catch(e){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:",e)}})()}),(a,e)=>{var t,p,g;return l(),s("div",y,[i("div",b,[e[3]||(e[3]=i("h2",{class:"profile-title"},"üë§ –ü—Ä–æ—Ñ–∏–ª—å",-1)),i("div",{class:n(["profile-status",{linked:va.value,unlinked:!va.value}])},[va.value?(l(),s("span",k,"‚úÖ")):(l(),s("span",_,"‚ö†Ô∏è")),i("span",w,r(va.value?"Telegram –ø—Ä–∏–≤—è–∑–∞–Ω":"Telegram –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω"),1)],2)]),i("div",D,[i("div",T,[i("div",U,[e[4]||(e[4]=i("h3",null,"–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",-1)),na.value?c("",!0):(l(),s("button",{key:0,onClick:ma,class:"edit-button"}," ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å "))]),i("div",x,[i("div",C,[e[5]||(e[5]=i("label",null,"Username:",-1)),i("span",N,r((null==(t=da.value)?void 0:t.telegram_username)||"–ù–µ —É–∫–∞–∑–∞–Ω"),1)]),i("div",P,[e[6]||(e[6]=i("label",null,"Chat ID:",-1)),i("span",I,r((null==(p=da.value)?void 0:p.chat_id)?`–ü—Ä–∏–≤—è–∑–∞–Ω (ID: ${da.value.chat_id})`:"–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω"),1)]),i("div",V,[e[7]||(e[7]=i("label",null,"–ü–æ–ª–Ω–æ–µ –∏–º—è:",-1)),na.value?(l(),s("div",q,[u(i("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>ra.value=a),type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é",class:"fullname-input"},null,512),[[o,ra.value]]),i("div",{class:"edit-actions"},[i("button",{onClick:pa,class:"save-button"},"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"),i("button",{onClick:fa,class:"cancel-button"},"‚ùå –û—Ç–º–µ–Ω–∞")])])):(l(),s("div",j,r((null==(g=da.value)?void 0:g.fullname)||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"),1))])])]),va.value?c("",!0):(l(),s("div",R,[e[9]||(e[9]=i("div",{class:"card-header"},[i("h3",null,"üîó –ü—Ä–∏–≤—è–∑–∫–∞ Telegram")],-1)),i("div",{class:"telegram-info"},[e[8]||(e[8]=i("p",{class:"warning-text"}," üì¢ –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Ç—É—Ä–Ω–∏—Ä–∞—Ö –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø—Ä–∏–≤—è–∂–∏—Ç–µ —Å–≤–æ–π Telegram –∞–∫–∫–∞—É–Ω—Ç! ",-1)),i("button",{onClick:ga,class:"link-telegram-button"}," üîó –ü—Ä–∏–≤—è–∑–∞—Ç—å Telegram ")])])),i("div",W,[e[14]||(e[14]=i("div",{class:"card-header"},[i("h3",null,"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")],-1)),i("div",F,[i("div",S,[i("div",A,r(ua.value.tournamentsParticipated),1),e[10]||(e[10]=i("div",{class:"stat-label"},"–¢—É—Ä–Ω–∏—Ä–æ–≤ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª",-1))]),i("div",H,[i("div",$,r(ua.value.tournamentsWon),1),e[11]||(e[11]=i("div",{class:"stat-label"},"–¢—É—Ä–Ω–∏—Ä–æ–≤ –≤—ã–∏–≥—Ä–∞–ª",-1))]),i("div",z,[i("div",B,r(ua.value.totalPoints),1),e[12]||(e[12]=i("div",{class:"stat-label"},"–í—Å–µ–≥–æ –æ—á–∫–æ–≤",-1))]),i("div",E,[i("div",G,r(ua.value.currentRank),1),e[13]||(e[13]=i("div",{class:"stat-label"},"–¢–µ–∫—É—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥",-1))])])]),i("div",J,[e[16]||(e[16]=i("div",{class:"card-header"},[i("h3",null,"üéØ –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å")],-1)),i("div",K,[0===oa.value.length?(l(),s("div",L,[...e[15]||(e[15]=[i("p",null,"–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",-1)])])):(l(),s("div",M,[(l(!0),s(d,null,v(oa.value,a=>{return l(),s("div",{key:a.id,class:"activity-item"},[i("div",O,r(a.icon),1),i("div",Q,[i("div",X,r(a.title),1),i("div",Y,r((e=a.date,new Intl.DateTimeFormat("ru-RU",{year:"numeric",month:"long",day:"numeric"}).format(e))),1)])]);var e}),128))]))])]),i("div",Z,[e[21]||(e[21]=i("div",{class:"card-header"},[i("h3",null,"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏")],-1)),i("div",aa,[i("div",ea,[i("label",ta,[u(i("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=a=>ca.value.notifications=a),onChange:ha},null,544),[[f,ca.value.notifications]]),e[17]||(e[17]=i("span",{class:"checkmark"},null,-1)),e[18]||(e[18]=m(" –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç—É—Ä–Ω–∏—Ä–∞—Ö ",-1))])]),i("div",sa,[i("label",la,[u(i("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>ca.value.resultsNotifications=a),onChange:ha},null,544),[[f,ca.value.resultsNotifications]]),e[19]||(e[19]=i("span",{class:"checkmark"},null,-1)),e[20]||(e[20]=m(" –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö ",-1))])])])])])])}}},[["__scopeId","data-v-e08d59db"]]);export{ia as default};
